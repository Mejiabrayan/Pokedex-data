let pokemonRepository=function(){let e=[],t=($(".searchInput"),$(".modal")),n=$(".modal-dialog"),a=$(".modal-content"),i=$(".modal-body"),o=$(".modal-title"),r=$(".modal-header"),l=$(".btn-close"),s=($("#form-input"),$("li"));function d(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.error("pokemon is not correct")}function p(e,n){e.on("click",(()=>{t.fadeIn("fast"),c(n)}))}function c(e){m(e).then((()=>{t.empty(),o.addClass("modal-title h5 col-sml-3");let s={fire:"text-danger",grass:"text-success",water:"text-primary",electric:"text-warning",flying:"text-info",poison:"text-secondary"};e.types.forEach((e=>o.addClass(s[e.type.name]))),o.html(`${e.name}`),i.html(`\n        Entry: ${e.id}<br>\n        Height: ${e.height}<br>\n        Weight: ${e.weight}<br>\n        Types: ${e.types[0].type.name}`),2===e.types.length&&(i.innerHTML+=`, ${e.types[1].type.name}`),i.innerHTML+=`<br>Abilities: ${e.abilities[0]}.ability.name}`,2===e.abilities.length&&(i.innerHTML+=`, ${e.abilities[1]}.ability.name}`),i.append(`<br>\n      <img src=${e.imageUrlFront} alt="${e.name} front sprite">\n      <img src=${e.imageUrlBack} alt="${e.name} back sprite">\n      <br>\n      `),n.append(a),a.append(r),r.append(o),r.append(l),a.append(i),t.append(n)})),t.modal("show")}async function m(e){h();let t=e.detailsUrl;try{const n=await fetch(t),a=await n.json();f(),e.imageUrlFront=a.sprites.front_default,e.imageUrlBack=a.sprites.back_default,e.id=a.id,e.height=a.height,e.weight=a.weight,e.types=a.types,e.abilities=a.abilities}catch(e){console.error(e)}}function h(){$(".spinner-border").remove("d-none")}function f(){$(".spinner-border").addClass("d-none")}return t.on("shown.bs.modal",(()=>{l.on("click",(()=>{t.removeClass("fade"),t.modal("hide"),s.eq(0).last().click()}))})),{add:d,getAll:function(){return e},addListItem:function(e){let t=$(".list-group-horizontal"),n=$("<li>");n.addClass("list-group-item text-center col-sm-6 col-md-4 border border-secondary bg-image img-fluid");let a=$("<h1>");a.html(`${e.name}`),a.addClass("display-6");let i=$("<div>");m(e).then((function(){i.append(`<img src=${e.imageUrlFront} alt="${e.name} sprite"/>`)}));let o=$("<button>");o.text("show More"),o.css({"box-shadow":"0 2px 5px 0 rgba(0,0,0,.2),0 2px 10px 0 rgba(0,0,0,.1)"}),o.addClass("mp-2 btn btn-danger"),o.attr("type","button"),o.attr("data-bs-toggle","modal"),o.attr("data-bs-toggle","#pokemonModal"),n.append(a),n.append(i),n.append(o),t.append(n),p(o,e)},search:function(t){return e.filter((e=>e.name===t))},showDetails:c,loadList:async function(){h();try{const e=await fetch("https://pokeapi.co/api/v2/pokemon/?limit=150"),t=await e.json();f(),t.results.forEach((e=>{d({name:e.name.charAt(0).toUpperCase()+e.name.slice(1),detailsUrl:e.url})}))}catch(e){console.error(e)}},loadDetails:m,buttonEvent:p,loadPage:function(){$("nav.nav-link").on("click",(function(e){e.preventDefault();var t=this.href;$("nav.nav-link").remove("active"),$(this).addClass("active"),$("#container").remove(),$("#content").load(`${t} #container`).hide().fadeIn("fast")}))}}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(e){pokemonRepository.addListItem(e)}))}));